#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main()
{
  const int size = 10; // Размер массива — 10 элементов
  int arr[size];       // Объявляем массив целых чисел

  srand(time(nullptr)); // Инициализация генератора случайных чисел

  cout << "Исходный массив: ";
  for (int i = 0; i < size; i++) // Заполняем массив случайными числами
  {
    arr[i] = rand() % 100; // Генерируем числа от 0 до 99
    cout << arr[i] << " "; // Выводим исходный массив
  }
  cout << "\n";

  // Усовершенствованная сортировка пузырьком
  for (int i = 0; i < size - 1; i++) // Внешний цикл — максимум size-1 проходов
  {
    int swaps = 0; // Счётчик перестановок на текущем проходе

    // Проходим по массиву от начала до size-1-i (последние i элементов уже отсортированы)
    for (int j = 0; j < size - 1 - i; j++)
    {
      if (arr[j] > arr[j + 1]) // Если текущий элемент больше следующего
      {
        swap(arr[j], arr[j + 1]); // Меняем их местами
        swaps++;                  // Увеличиваем счётчик перестановок
      }
    }

    cout << "Проход " << (i + 1) << ": ";
    for (int k = 0; k < size; k++) // Выводим состояние массива после прохода
    {
      cout << arr[k] << " ";
    }
    cout << "(перестановок: " << swaps << ")\n";

    if (swaps == 0) // Если на этом проходе не было перестановок
    {
      cout << "Массив уже отсортирован. Сортировка завершена досрочно.\n";
      break; // Прерываем сортировку — дальнейшие проходы не нужны
    }
  }

  cout << "Отсортированный массив: ";
  for (int i = 0; i < size; i++)
  {
    cout << arr[i] << " ";
  }
  cout << "\n";

  return 0;
}